# python-trie-patterns-matched-with-text
Matches are found between a text and a trie that stores multiple patterns.

This Python program makes a trie from multiple string patterns, and finds matches within a text.  The first line of input is the text. The second line of input is an integer number N of patterns.  Each of the next N lines of input is one of the N patterns.  The output is a space delimited list of the 0-based index for every starting position of a substring in the text that matches any of the patterns.

First, the trie is constructed.  Second, matches are found of substrings in the text.

The trie is a node dictionary of edge dictionaries.  The node dictionary has keys that are the numbered nodes of the trie, and values that are the edge dictionaries.  For example, the key 0 of the node dictionary maps to a value that is an edge dictionary of the node 0. An edge dictionary has keys that are individual letters from the patterns, and values that are the node numbers of other nodes.
The trie initially has a key for node 0 and a value of an empty dictionary. To make the trie, an outer loop iterates through the patterns, and an inner loop iterates through the letters of the pattern. The inner loop is preceded by a reset of the current node dictionary to node 0. Each iteration of the inner loop uses the node dictionary to use the current node as a key to access the edge dictionary of the current node.  
If this edge dictionary has a key that matches the letter of the current inner loop iteration, then the value of the key indicates the next node.  The next node replaces the current node for the next iteration of the inner loop.  Else, this edge dictionary is expanded with a new key and a new value.  The new is the letter of the current inner loop iteration. The new value is the node number of a new node that is added to the node dictionary.  The new node replaces the current node for the next iteration of the inner loop.
After completion of the inner loop, and before the next iteration of the outer loop, the edge dictionary of the current node is checked for a symbol for a pattern end, such as '$'.  If absent, the pattern end is added as a new key to the edge dictionary. The value of the new key is the length of the pattern for the current outer loop iteration. The symbol of the pattern end is necessary to indicate the end of a pattern that is a prefix of another pattern.

Matches are found by iterating through every suffix of the text.  For each iteration, the trie is traversed starting from node 0.  The trie edges are traversed according to the successive letters in the text.  If any of the destination nodes has as a key the symbol for a pattern end, then a pattern match is found. In this implementation, the starting index of the pattern is pushed into a heap.  Emptying the heap yields an ordered sequence of every starting position of a substring in the text that matches any of the patterns.
